


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>The AnyMoCap Framework &#8212; AMMR v2.2.3 Documentation</title>
    <link rel="stylesheet" href="../_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/gallery.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Noticia+Text|Open+Sans|Droid+Sans+Mono" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/cloud.base.js"></script>
    <script type="text/javascript" src="../_static/cloud.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ground Reaction force prediction" href="grf-prediction.html" />
    <link rel="prev" title="Lesson 3: Scaling using segmental scaling vectors" href="../Scaling/lesson3.html" /> 
        <meta name="viewport" content="width=device-width, initial-scale=1">
  </head><body>
    <div class="relbar-top">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../contents.html" title="Table Of Contents"
             accesskey="C">toc</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="grf-prediction.html" title="Ground Reaction force prediction"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../Scaling/lesson3.html" title="Lesson 3: Scaling using segmental scaling vectors"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">AMMR v2.2.3 Documentation</a> &#187;</li>
 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="the-anymocap-framework">
<span id="anymocap"></span><h1>The AnyMoCap Framework<a class="headerlink" href="#the-anymocap-framework" title="Permalink to this headline">¶</a></h1>
<p>The AnyMoCap model is an effort to create a simple and unified framework for
doing any kind of mocap analysis with the <a class="reference external" href="http://anybodytech.com">AnyBody Modeling
System</a>.</p>
<a class="reference internal image-reference" href="../_images/anymocap.jpg"><img alt="../_images/anymocap.jpg" class="align-center" src="../_images/anymocap.jpg" style="width: 50%;" /></a>
<div class="section" id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Adapts to any Mocap protocol</li>
<li>Optimization of marker locations and anthropometrics.</li>
<li>Support Marker based (C3D) and inertial based (BVH) input.</li>
<li>Support for standard force plates: (Types 1-4) plus more.</li>
<li><a class="reference internal" href="grf-prediction.html"><span class="doc">Prediction of ground reaction forces</span></a></li>
<li>Easy setup with multiple trials and subjects</li>
</ul>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="over-determinate-kinematic-analysis">
<h2>Over determinate kinematic analysis<a class="headerlink" href="#over-determinate-kinematic-analysis" title="Permalink to this headline">¶</a></h2>
<p>Musculoskeletal models that use Motion capture data are different from other
types of models found the AMMR.  Most importantly, MOCAP models usually require
an over-determinate kinematic solver to handle the excess in information that
the optical markers provide.</p>
<p>The over-determinate solver in AMS works great, but
it can only find velocities and accelerations numerically. That has some
performance issue when running inverse dynamics analysis. To overcome the
problem, the MOCAP analysis is split into a two-step procedure, as illustrated on
the figure below:</p>
<div class="figure" id="id1">
<span id="anymocap-flow-figure"></span><img alt="../_images/anymocap_flow.png" src="../_images/anymocap_flow.png" />
<p class="caption"><span class="caption-text">Figure 1: The framework of the AnyMoCap model. Analysis is split into three
steps. <em>Parameter identification</em>, <em>Marker tracking</em>, <em>Inverse dynamic
analysis</em>.</span></p>
</div>
<p>The over determinate kinematic analysis solves the model for positions, and
writes joint angles to a a set of files. These joint angles can then be used
with the determinate kinematic solver in the inverse dynamic analysis.</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">The AnyBody tutorials, and the lesson on using the
<a class="reference external" href="https://anyscript.org/tutorials/Making_things_move/lesson5.html" title="(in AnyBody Tutorials v7.2)"><span class="xref std std-doc">AnyMoCap model</span></a></p>
</div>
</div>
<div class="section" id="anymocap-examples">
<h2>AnyMoCap examples<a class="headerlink" href="#anymocap-examples" title="Permalink to this headline">¶</a></h2>
<p>The following gallery shows different examples using the AnyMoCap framework.</p>
<div class="sphx-glr-thumbcontainer" tooltip="Example of a MoCap mdoel using data from an inertial motional caputure suit. The model uses a B..."><div class="figure" id="id2">
<img alt="../_images/sphx_glr_plot_BVH_thumb.png" src="../_images/sphx_glr_plot_BVH_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/Mocap/plot_BVH.html#sphx-glr-auto-examples-mocap-plot-bvh-py"><span class="std std-ref">Inertial MoCap example</span></a></span></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="A collection of small models that show-off special features of the *AnyMoCap* framework."><div class="figure" id="id3">
<img alt="../_images/sphx_glr_plot_AnyMocapFeatures_thumb.png" src="../_images/sphx_glr_plot_AnyMocapFeatures_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/Mocap/plot_AnyMocapFeatures.html#sphx-glr-auto-examples-mocap-plot-anymocapfeatures-py"><span class="std std-ref">AnyMoCap Features</span></a></span></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Example of full body MoCap model using the Plug-in-Gait marker protocol, and walking on three t..."><div class="figure" id="id4">
<img alt="../_images/sphx_glr_plot_Plug-in-gait_Simple_FullBody_thumb.png" src="../_images/sphx_glr_plot_Plug-in-gait_Simple_FullBody_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/Mocap/plot_Plug-in-gait_Simple_FullBody.html#sphx-glr-auto-examples-mocap-plot-plug-in-gait-simple-fullbody-py"><span class="std std-ref">Simple Full body model</span></a></span></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Example of full body MoCap model using the Plug-in-Gait marker protocol but without force plate..."><div class="figure" id="id5">
<img alt="../_images/sphx_glr_plot_Plug-in-gait_Simple_FullBody_GRFPrediction_thumb.png" src="../_images/sphx_glr_plot_Plug-in-gait_Simple_FullBody_GRFPrediction_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/Mocap/plot_Plug-in-gait_Simple_FullBody_GRFPrediction.html#sphx-glr-auto-examples-mocap-plot-plug-in-gait-simple-fullbody-grfprediction-py"><span class="std std-ref">Simple GRF prediction model</span></a></span></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Example of lower body MoCap model using the Plug-in-Gait marker protocol, and walking on three ..."><div class="figure" id="id6">
<img alt="../_images/sphx_glr_plot_Plug-in-gait_Simple_LowerExtremity_thumb.png" src="../_images/sphx_glr_plot_Plug-in-gait_Simple_LowerExtremity_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/Mocap/plot_Plug-in-gait_Simple_LowerExtremity.html#sphx-glr-auto-examples-mocap-plot-plug-in-gait-simple-lowerextremity-py"><span class="std std-ref">Simple Lower extremity model</span></a></span></p>
</div>
</div><div class="sphx-glr-thumbcontainer" tooltip="Example of a MoCap model structured for analyzing data from multiple subjects and trials. This ..."><div class="figure" id="id7">
<img alt="../_images/sphx_glr_plot_Plug-in-gait_MultiTrial_StandingRef_thumb.png" src="../_images/sphx_glr_plot_Plug-in-gait_MultiTrial_StandingRef_thumb.png" />
<p class="caption"><span class="caption-text"><a class="reference internal" href="../auto_examples/Mocap/plot_Plug-in-gait_MultiTrial_StandingRef.html#sphx-glr-auto-examples-mocap-plot-plug-in-gait-multitrial-standingref-py"><span class="std std-ref">Multi trial MoCap model</span></a></span></p>
</div>
</div><div style='clear:both'></div><div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The <em>Multi trial MoCap model</em> is likely the best starting point when
working with many trials/subjects from a MoCap experiment.</p>
</div>
</div>
<div class="emphasize-children section" id="get-started">
<h2>Get started<a class="headerlink" href="#get-started" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to get started, is to adapt one the example application above.</p>
<p>A typical application using the AnyMoCap framework will look something like this:</p>
<div class="highlight-AnyScriptDoc notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="cp">#include</span> <span class="s">&quot;../libdef.any&quot;</span>

 <span class="cp">#path</span> <span class="n">MOCAP_TRIAL_SPECIFIC_DATA</span> <span class="s">&quot;TrialSpecificData.any&quot;</span>
 <span class="cp">#path</span> <span class="n">MOCAP_SUBJECT_SPECIFIC_DATA</span> <span class="s">&quot;SubjectSpecificData.any&quot;</span>
 <span class="cp">#path</span> <span class="n">MOCAP_LAB_SPECIFIC_DATA</span> <span class="s">&quot;LabSpecificData.any&quot;</span>

 <span class="c1">// Include the AnyMoCap Framwork</span>
 <span class="cp">#include</span> <span class="s">&quot;&lt;ANYMOCAP_MODEL&gt;&quot;</span>
</pre></div>
</td></tr></table></div>
<p>You can place this main file anywhere on your computer as long the
<code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">libdef</span><span class="p">.</span><span class="n">any</span></code> file points to model repository (AMMR) you want to use.</p>
<div class="admonition caution">
<p class="first admonition-title">Caution</p>
<p class="last">It is recommended <em>not</em> to place working models inside the AMMR folder.
Copy the example elsewhere before using.</p>
</div>
<div class="section" id="model-structure">
<h3>Model structure<a class="headerlink" href="#model-structure" title="Permalink to this headline">¶</a></h3>
<p>When loading the AnyMoCap model the following layout shows up in the model tree:</p>
<div class="figure">
<img alt="../_images/model-structure.png" src="../_images/model-structure.png" />
</div>
<div class="html-toggle section" id="description-of-model-folders">
<h4>Description of Model folders<a class="headerlink" href="#description-of-model-folders" title="Permalink to this headline">¶</a></h4>
<table border="1" class="styled-table plain docutils" id="id8">
<caption><span class="caption-text">Top-level model structure</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="27%" />
<col width="73%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="left-align head">Folder name</th>
<th class="left-align head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">ModelSetup</span></code></td>
<td class="left-align">Contains contains all the machinery of the AnyMoCap Frame.</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">HumanModel</span></code></td>
<td class="left-align">Contain the Human model used. This is constructed automatically by the AnyMoCap framework.</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">EnvironmentModel</span></code></td>
<td class="left-align">Contains the model parts which are not part of the Human model. (e.g.  force plate and environment)</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Studies</span></code></td>
<td class="left-align">Contains the three studies <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">ParameterIdentification</span></code>, <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MarkerTracking</span></code>, and
<code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">InverseDynamicStudy</span></code>. See <a class="reference internal" href="#anymocap-flow-figure"><span class="std std-ref">figure 1</span></a>.</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">DrawSettings</span></code></td>
<td class="left-align">Contains visual and color settings for the model.</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">RunParameterIdentification</span></code></td>
<td class="left-align">Operation to run the Parameter Identification study and save the results.</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">RunAnalysis</span></code></td>
<td class="left-align">Operation to 1. load the optimized parameters (scaling and marker positions), 2. run marker
tracking and finally 3. run inverse dynamics analysis, 4. save results to and HDF5 file for later replay.</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">LoadAndReplay</span></code></td>
<td class="left-align">This loads any previously saved data and starts the replay operation.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="emphasize-children section" id="options-and-settings">
<span id="anymocap-settings"></span><h2>Options and settings<a class="headerlink" href="#options-and-settings" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span></code> folder contains the main machinery of the <em>AnyMoCap</em>
framework. It is controlled by a number of settings both <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="cp">#define</span></code>/<code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="cp">#path</span></code> switches
and variables which can be set directly. For example:</p>
<div class="highlight-AnyScriptDoc notranslate"><div class="highlight"><pre><span></span><span class="cp">#define</span> <span class="n">MOCAP_INPUT_DATA_TYPE</span> <span class="s">&quot;C3D&quot;</span>

<span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">TrialSpecificData</span><span class="p">.</span><span class="n">LastFrame</span> <span class="o">=</span> <span class="mi">240</span><span class="p">;</span>
</pre></div>
</div>
<p>The following two sections gives an overview of the settings available:</p>
<div class="html-toggle section" id="paths-settings-and-switches">
<h3>Paths settings and switches<a class="headerlink" href="#paths-settings-and-switches" title="Permalink to this headline">¶</a></h3>
<p>Path settings and switches are usually prefixed by <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_</span></code> to indicate that
they are specific to the AnyMoCap framework.</p>
<table border="1" class="styled-table docutils" id="id9">
<caption><span class="caption-text"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="cp">#path</span></code> settings for AnyMoCap.</span><a class="headerlink" href="#id9" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="23%" />
<col width="54%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="left-align head">Settings</th>
<th class="left-align head">Description</th>
<th class="left-align head">Default</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_TRIAL_SPECIFIC_DATA</span></code></td>
<td class="left-align">Path to a file with trial specific data. This file is include within the
<code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">TrialSpecificData</span></code> folder.</td>
<td class="left-align">None</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_SUBJECT_SPECIFIC_DATA</span></code></td>
<td class="left-align">Path to a file with subject/session specific data. This file is include within the
<code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">SubjectSpecificData</span></code> folder.</td>
<td class="left-align">None</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_LAB_SPECIFIC_DATA</span></code></td>
<td class="left-align">Path to a file with laboratory specific data (i.e. data common for the whole model or
experimental setup. This file is include within the <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">LabSpecificData</span></code>
folder.</td>
<td class="left-align">None</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_C3DSETTINGS</span></code></td>
<td class="left-align">A file with setting for the C3D file.</td>
<td class="left-align">None</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_BVHSETTINGS</span></code></td>
<td class="left-align">A file with setting for the C3D file.</td>
<td class="left-align">None</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_EXTRA_DRIVERS_FILE</span></code></td>
<td class="left-align">A file with user defined extra drivers. Additional drivers are useful/necessary
in some cases where the marker protocol doesn’t provide enough information
to specify all degrees of freedom. Hence, these drivers complement a
specific driver protocol. This file is included in <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">MoCapExtraDrivers</span></code></td>
<td class="left-align">None</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_MARKER_PROTOCOL_FILE</span></code></td>
<td class="left-align">A file with the definition of the marker protocol.
This file is included in <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">MoCapDrivers</span></code></td>
<td class="left-align">None</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">BODY_MODEL_CONFIG_FILE</span></code></td>
<td class="left-align">A file with the body model configuration.</td>
<td class="left-align">None</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_FORCE_PLATE_FILE</span></code></td>
<td class="left-align">A file with the definition of the force plates.</td>
<td class="left-align">None</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_C3D_DATA_PATH</span></code></td>
<td class="left-align">Path to folder where C3D files are stored.</td>
<td class="left-align">Main file directory</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">ANYMOCAP_MODEL_PATH</span></code></td>
<td class="left-align">Path to the AnyMoCap framework.</td>
<td class="left-align">The AnyMoCap implementation in the AMMR</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">ANYBODY_PATH_OUTPUT</span></code></td>
<td class="left-align">Path to where output files are saved.</td>
<td class="left-align">The main file directory</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">TEMP_PATH</span></code></td>
<td class="left-align">Path to where temporary files are saved (joint angles etc.)</td>
<td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">ANYBODY_PATH_OUTPUT</span></code></td>
</tr>
</tbody>
</table>
<table border="1" class="styled-table docutils" id="id10">
<caption><span class="caption-text"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="cp">#define</span></code> settings for AnyMoCap.</span><a class="headerlink" href="#id10" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="26%" />
<col width="52%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="left-align head">Setting</th>
<th class="left-align head">Description</th>
<th class="left-align head">Default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_INPUT_DATA_TYPE</span></code></td>
<td class="left-align">Data type (“C3D”, “BVH”) used by the AnyMoCap application.</td>
<td class="left-align">“C3D”</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_CREATE_PARAMETER_ID_SHORTCUT</span></code></td>
<td class="left-align">Setting for creating the <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">RunParameterIdentification</span></code> shortcut operation  .</td>
<td class="left-align">ON</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_OUTPUT_FILENAME_PREFIX</span></code></td>
<td class="left-align">Prefix added to all output files from the model.</td>
<td class="left-align">“”</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_PARAMETER_FILE_PREFIX</span></code></td>
<td class="left-align">Prefix for the parameter identfication files. Can be usefull to set explicitly
in special cases where subjects share a common parameter file.</td>
<td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_OUTPUT_FILENAME_PREFIX</span></code></td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_USE_GRF_PREDICTION</span></code></td>
<td class="left-align">Switch to indicate that the model uses Ground Reaction Force (GRF) prediction. It will ensure
that the AnyMoCap framework uses the appropriate settings. (e.g. recruited actuators as weak
residuals on the pelvis.</td>
<td class="left-align">OFF</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_FILTER_JOINT_ANGLES</span></code></td>
<td class="left-align">Switch to enable extra low pass filtering of the output from the Marker tracking. Useful in
some cases where other drivers (e.g. joint limits) cause high accelerations in the output
from Marker tracking.</td>
<td class="left-align">OFF</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_HIDE_UPPERBODY</span></code></td>
<td class="left-align">Switch hide the upper body (Thorax, neck, arms and skull).</td>
<td class="left-align">OFF</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">MOCAP_HUMAN_GROUND_RESIDUALS</span></code></td>
<td class="left-align">The type of Human Ground residuals (Hand of God) used. Possible values are
“Pelvis”, “Thorax”, “PelvisWeak”. “PelvisWeak” is default when using GRF prediction.</td>
<td class="left-align">“Pelvis”</td>
</tr>
</tbody>
</table>
</div>
<div class="html-toggle section" id="configurable-variables">
<h3>Configurable variables<a class="headerlink" href="#configurable-variables" title="Permalink to this headline">¶</a></h3>
<p>The <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span></code> folder contains all the machinery of the AnyMoCap
framework. It has three important subfolder (<code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">TrialSpecificData</span></code>,
<code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">SubjectSpecificData</span></code> and <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">LabSpecificData</span></code>).</p>
<div class="figure" id="id11">
<img alt="../_images/model-setup-structure.png" src="../_images/model-setup-structure.png" />
<p class="caption"><span class="caption-text">These three folders contain variables specific to the application but also has
a few variables which can be assigned directly by the user.</span></p>
</div>
<table border="1" class="styled-table docutils" id="id12">
<caption><span class="caption-text">Variables in the <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">TrialSpecificData</span></code> folder which can be overridden.</span><a class="headerlink" href="#id12" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="23%" />
<col width="54%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="left-align head"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">TrialSpecificData</span></code></th>
<th class="left-align head">Description</th>
<th class="left-align head">Default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">TrialFileName</span></code></td>
<td class="left-align">Name of the current trial. This is usually used for naming output files and
locating the input c3d files (c3d filename without the extension)</td>
<td class="left-align">Name of the main-file directory</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">LoadParametersFrom</span></code></td>
<td class="left-align">List of trial names from which the scaling and optimized marker postions are loaded from.</td>
<td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="p">{</span><span class="n">TrialFileName</span><span class="p">}</span></code></td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">FirstFrame</span></code></td>
<td class="left-align">First frame of the C3D/BVH file to use as starting frame in the analysis</td>
<td class="left-align">First frame in the C3D/BVH file</td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">LastFrame</span></code></td>
<td class="left-align">The last frame of the C3D/BVH file to use in the analysis</td>
<td class="left-align">Last frame in the C3D/BVH</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">tStart</span></code></td>
<td class="left-align">Specifies the start time of the analysis. Setting this overides <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">FirstFrame</span></code></td>
<td class="left-align">Calculated based on <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">FirstFrame</span></code></td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">tEnd</span></code></td>
<td class="left-align">Specifies the end time of the analysis. Setting this overides <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">LastFrame</span></code></td>
<td class="left-align">Calculated based on <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">LastFrame</span></code></td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">nStep</span></code></td>
<td class="left-align">Number of time steps used in the analysis. (Note that the number of time-steps in the inverse
dynamic analysis will be 4 less than this values)</td>
<td class="left-align">Calculate based on <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">tStart</span></code>/<code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">tEnd</span></code></td>
</tr>
</tbody>
</table>
<table border="1" class="styled-table docutils" id="id13">
<caption><span class="caption-text">Variables in the <code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">LabSpecificData</span></code> folder which can be overridden.</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="23%" />
<col width="54%" />
<col width="23%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="left-align head"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Main</span><span class="p">.</span><span class="n">ModelSetup</span><span class="p">.</span><span class="n">LabSpecificData</span></code></th>
<th class="left-align head">Description</th>
<th class="left-align head">Default value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">Gravity</span></code></td>
<td class="left-align">Specifies the gravity vector in global reference frame.</td>
<td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mf">9.81</span><span class="p">}</span></code></td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="n">LowPassFilterSettings</span></code></td>
<td class="left-align">Folder with filter settings used for markers and analog (force) data.</td>
<td class="left-align">&#160;</td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="p">.</span><span class="n">MarkerFilterCutOffFrequency</span></code></td>
<td class="left-align">The lowpass cutoff frequency used for the marker data.</td>
<td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="mf">5.0</span></code></td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="p">.</span><span class="n">MarkerFilterOrder</span></code></td>
<td class="left-align">The filter order used when low pass filtering the marker data.
Note: Since the filter is applied as a zero phase filter
(<strong>filtfilt</strong> or forward/backward filter) the effective filter order is the
double of this value.</td>
<td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="mi">2</span></code></td>
</tr>
<tr class="row-even"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="p">.</span><span class="n">ForceFilterCutOffFrequency</span></code></td>
<td class="left-align">The lowpass cutoff frequency used for the force/analog data.</td>
<td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="mf">12.0</span></code></td>
</tr>
<tr class="row-odd"><td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="p">.</span><span class="n">ForceFilterOrder</span></code></td>
<td class="left-align">The filter order used when low pass filtering the force/analog data.
Note: Since the filter is applied as a zero phase filter
(<strong>filtfilt</strong> or forward/backward filter) the effective filter order is the
double of this value.</td>
<td class="left-align"><code class="docutils literal highlight highlight-AnyScriptDoc"><span></span><span class="mi">2</span></code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="more-resources">
<h2>More resources<a class="headerlink" href="#more-resources" title="Permalink to this headline">¶</a></h2>
<p>This section contains further documentation on the AnyMoCap framework.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="grf-prediction.html">Ground Reaction force prediction</a></li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../index.html" title="index">
          <img class="logo" src="../_static/AMMR_Logo.png" alt="Logo"/>
        </a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<div class="sphinx-toc sphinxglobaltoc">
<h3><a href="../contents.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Welcome to the AMMR documentation!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started with AMMR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bm_config/index.html">Configuring the Body Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../body/models.html">The Body Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auto_examples/index.html">Application Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../creating_model_from_scratch.html">Creating a Human model from scratch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Scaling/intro.html">Introduction to Scaling</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The AnyMoCap Framework</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#features">Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#over-determinate-kinematic-analysis">Over determinate kinematic analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#anymocap-examples">AnyMoCap examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-started">Get started</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-and-settings">Options and settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#more-resources">More resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../about.html">About the AMMR</a></li>
</ul>
</div>
        </div>
      </div>
    
    
        <div class="sidebar-toggle-group no-js">
            
            <button class="sidebar-toggle" id="sidebar-hide" title="Hide the sidebar menu">
                 «
                <span class="show-for-small">hide menu</span>
                
            </button>
            <button class="sidebar-toggle" id="sidebar-show" title="Show the sidebar menu">
                
                <span class="show-for-small">menu</span>
                <span class="hide-for-small">sidebar</span>
                 »
            </button>
        </div>
    
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../contents.html" title="Table Of Contents"
             >toc</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="grf-prediction.html" title="Ground Reaction force prediction"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="../Scaling/lesson3.html" title="Lesson 3: Scaling using segmental scaling vectors"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">AMMR v2.2.3 Documentation</a> &#187;</li>
 
      </ul>
    </div>
    </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, AnyBody Technology.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
    <!-- cloud_sptheme 1.4 -->
  </body>
</html>